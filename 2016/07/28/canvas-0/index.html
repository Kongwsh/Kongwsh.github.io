<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      Canvas基础 | Kongwsh 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="Kong">
    
    

    <meta name="description" content="HTML5 的 canvas 元素使用 JavaScript 在网页上绘制图像。
创建canvas1&amp;lt;canvas id=&quot;myCanvas&quot; width=&quot;200&quot; height=&quot;100&quot;&amp;gt;&amp;lt;/canvas&amp;gt;
Canvas是一个HTML标签，设置id和样式：width属性和height属性，不带单位，因为这样也一同决定了画布的分辨率。">
<meta property="og:type" content="article">
<meta property="og:title" content="Canvas基础 | Kongwsh">
<meta property="og:url" content="http://yoursite.com/2016/07/28/canvas-0/index.html">
<meta property="og:site_name" content="Kongwsh">
<meta property="og:description" content="HTML5 的 canvas 元素使用 JavaScript 在网页上绘制图像。
创建canvas1&amp;lt;canvas id=&quot;myCanvas&quot; width=&quot;200&quot; height=&quot;100&quot;&amp;gt;&amp;lt;/canvas&amp;gt;
Canvas是一个HTML标签，设置id和样式：width属性和height属性，不带单位，因为这样也一同决定了画布的分辨率。">
<meta property="og:updated_time" content="2016-10-30T09:15:27.084Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Canvas基础 | Kongwsh">
<meta name="twitter:description" content="HTML5 的 canvas 元素使用 JavaScript 在网页上绘制图像。
创建canvas1&amp;lt;canvas id=&quot;myCanvas&quot; width=&quot;200&quot; height=&quot;100&quot;&amp;gt;&amp;lt;/canvas&amp;gt;
Canvas是一个HTML标签，设置id和样式：width属性和height属性，不带单位，因为这样也一同决定了画布的分辨率。">
    
    
    
      <link rel="icon" type="image/x-icon" href="/favicon.png">
    
    <link rel="stylesheet" href="/css/uno.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css">

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">Kongwsh</a></h1>
        <hr class="panel-cover__divider" />

        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">首页</a></li>
              
                
                <li class="navigation__item"><a href="/about" title="" class="">关于</a></li>
              
                
                <li class="navigation__item"><a href="/archive" title="" class="">归档</a></li>
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->



        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">Canvas基础</h1>

    

    <div class="post-meta">
      <time datetime="2016-07-28" class="post-meta__date date">2016-07-28</time> 

      <span class="post-meta__tags tags">

          

          
             &#8226; 标签:
            <font class="tags">
              <a class="tags-link" href="/tags/canvas/">canvas</a>
            </font>
          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <p>HTML5 的 canvas 元素使用 JavaScript 在网页上绘制图像。</p>
<h1 id="创建canvas"><a href="#创建canvas" class="headerlink" title="创建canvas"></a>创建canvas</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"myCanvas"</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"100"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Canvas是一个HTML标签，设置id和样式：width属性和height属性，不带单位，因为这样也一同决定了画布的分辨率。</p>
<a id="more"></a>
<h1 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h1><p>JavaScript 使用 id 来寻找 canvas 元素：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</div><div class="line"><span class="comment">//context绘图上下文环境，提供绘制接口</span></div><div class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</div></pre></td></tr></table></figure></p>
<p>接下来使用context绘制，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//指定大小</div><div class="line">canvas.width</div><div class="line">canvas.height</div></pre></td></tr></table></figure></p>
<h1 id="Canvas基于状态绘制"><a href="#Canvas基于状态绘制" class="headerlink" title="Canvas基于状态绘制"></a>Canvas基于状态绘制</h1><p>先设置绘图状态<br>再调用具体函数绘制</p>
<h1 id="状态函数"><a href="#状态函数" class="headerlink" title="状态函数"></a>状态函数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">context.moveTo();</div><div class="line">contxt.lineTo();</div><div class="line">//线段粗细</div><div class="line">context.lineWidth = 5;</div><div class="line">//线条颜色</div><div class="line">context.strokeStyle = &quot;blue&quot;;</div><div class="line">//填充颜色</div><div class="line">context. fillStyle =&quot;rgb(2,100,30)&quot;;</div><div class="line">//重新规划路径，清空</div><div class="line">context.beginPath();</div><div class="line">//自动闭合路径,对fill（）没有用</div><div class="line">context.closePath();</div></pre></td></tr></table></figure>
<h1 id="绘制函数"><a href="#绘制函数" class="headerlink" title="绘制函数"></a>绘制函数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">context.stroke();</div><div class="line">context.fill();</div></pre></td></tr></table></figure>
<p>#弧<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">context.arc(</div><div class="line">centerx,centery,radius,</div><div class="line">startingAngle,endingAngle,</div><div class="line">anticlockwise = false//顺时针默认</div><div class="line">)</div></pre></td></tr></table></figure></p>
<p>#倒计时<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">第(i,j)个圆的圆心位置：</div><div class="line">centerX：x+j*2(R+1) +(R+1)</div><div class="line">centerY：y+i*2(R+1) +(R+1)</div><div class="line">时间相关的函数：</div><div class="line">const endtime = new Date(2016,6,1,12,23,56);</div><div class="line">//月份从零开始计，6代表7月</div></pre></td></tr></table></figure></p>
<h1 id="简单动画架构"><a href="#简单动画架构" class="headerlink" title="简单动画架构"></a>简单动画架构</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">setInterval(</div><div class="line">//匿名函数</div><div class="line">function()&#123;</div><div class="line">    //绘制当前画面</div><div class="line">    render();</div><div class="line">    //调整数据</div><div class="line">    update();</div><div class="line">&#125;,</div><div class="line">50</div><div class="line">);</div></pre></td></tr></table></figure>
<h1 id="刷新"><a href="#刷新" class="headerlink" title="刷新"></a>刷新</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">context.clearRect(x,y,width,height);</div></pre></td></tr></table></figure>
<h1 id="绘制封闭多边形"><a href="#绘制封闭多边形" class="headerlink" title="绘制封闭多边形"></a>绘制封闭多边形</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">成对使用</div><div class="line"></div><div class="line">context.beginPath();//起始一条路径，或重置当前路径</div><div class="line">context.closePath();//  创建从当前点回到起始点的路径</div></pre></td></tr></table></figure>
<p>当我们绘制一个需要描边的填充图时，应该先填充颜色，在描边，否则填充颜色会覆盖边。</p>
<h1 id="四边形"><a href="#四边形" class="headerlink" title="四边形"></a>四边形</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">context.rect(x,y,width,height)；//规划矩形路径,路径方向顺时针方向</div><div class="line">context.fillRect(x,y,width,height);//直接使用当前的fillStyle，绘制出填充的矩形</div><div class="line">context.strokeRect(x,y,wodth,height)；//使用当前的strokeStyle，绘制边框</div><div class="line">clearRect();//在给定的矩形内清除指定的像素</div></pre></td></tr></table></figure>
<p>后绘制图形会遮盖前绘制的图形</p>
<h1 id="颜色表示方法"><a href="#颜色表示方法" class="headerlink" title="颜色表示方法"></a>颜色表示方法</h1><p>#ffffff<br>#642<br>rgb(255,128,0)<br>rgba(100,100,100,0.8)<br>hsl(20,62%,28%)<br>hsla(40,82%,33%,0.6)<br>red</p>
<h1 id="线条的属性"><a href="#线条的属性" class="headerlink" title="线条的属性"></a>线条的属性</h1><p>lineWidth<br>线条两端，只能用于开始和结尾处，不能用于连接处,设置或返回线条的结束端点样式<br>lineCap:butt(default)<br>        round<br>        square<br>线条连接,设置或返回两条线相交时，所创建的拐角类型<br>lineJoin:miter(default)//尖角<br>         bevel//斜接<br>         round//圆角</p>
<p>miterLimite：设置或返回最大斜接长度“当宽线条使用设置为 “miter” 的 lineJoin 属性绘制并且两条线段以锐角相交的时候，所得的斜面可能相当长。当斜面太长，就会变得不协调。miterLimit 属性为斜面的长度设置一个上限。这个属性表示斜面长度和线条长度的比值。默认是 10，意味着一个斜面的长度不应该超过线条宽度的 10 倍。如果斜面达到这个长度，它就变成斜角了。”</p>
<h1 id="图形变换"><a href="#图形变换" class="headerlink" title="图形变换"></a>图形变换</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">位移 translate(x,y)//基坐标，叠加作用</div><div class="line">旋转 rotate(deg)//弧度值</div><div class="line">缩放 scale(sx,sy)</div><div class="line"></div><div class="line">context.save();//保存当前的图形状态</div><div class="line">context.restore();//成对出现，恢复，返回在save()所有状态</div></pre></td></tr></table></figure>
<p>缩放 scale(sx,sy);<br>副作用:坐标，边框</p>
<h1 id="变换矩阵"><a href="#变换矩阵" class="headerlink" title="变换矩阵"></a>变换矩阵</h1><p>transform(a,b,c,d,e,f)<br>|a c e|<br>|b d f|<br>|0 0 1|<br>a水平缩放(1)<br>b水平倾斜(0)<br>c垂直倾斜(0)<br>d垂直缩放(1)<br>e水平位移(0)<br>f垂直位移(0)<br>多次级联<br>context.setTransform(a,b,c,d,e,f);//使之前的transform失效</p>
<h1 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h1><p>fillStyle||strokeStyle<br>线性渐变色<br>1.var grd = context.createLinearGradient(xstart,ystart,xend,yend);<br>2.grd.addColorStop(stop,color);//stop取0~1,规定渐变对象中的颜色和停止位置<br>径向渐变 Radial Gradient<br>1.var grd = context.createRadialGradient(x0,y0,r0,x1,y1,r1);<br>2.grd.addColorStop(stop,color);//stop取0~1</p>
<p> 使用图片/画布/video创建样式<br>createPattern(canvas/img/video,repeat-style)；//在指定的方向上重复指定的元素<br>repeat-style：no-repeat 不重复<br>              repeat-x   沿x轴重复<br>              repeat-y   沿y轴重复<br>              repeat     x，y都重复</p>
<h1 id="曲线"><a href="#曲线" class="headerlink" title="曲线"></a>曲线</h1><p>cxt.arc(centerx,centery,radius,staertingAvgle,endingAngle,anticlockwise =flase);<br>//无论顺逆，角度不变<br>arcTo(x1,y1,x2,y2,radius)<br>控制点用moveTo指定<br>贝塞尔曲线Bazier<br>context.quadraticCurveTo(cpx,cpy,x,y);<br>context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);</p>
<h1 id="文字渲染"><a href="#文字渲染" class="headerlink" title="文字渲染"></a>文字渲染</h1><p>fillText()  在画布上绘制“被填充的”文本<br>strokeText()    在画布上绘制文本（无填充）<br>参数：<br>text     规定在画布上输出的文本。<br>x   开始绘制文本的 x 坐标位置（相对于画布）。<br>y   开始绘制文本的 y 坐标位置（相对于画布）。<br>maxWidth    可选。允许的最大文本宽度，以像素计。<br>属性：<br>font    设置或返回文本内容的当前字体属性<br>textAlign   设置或返回文本内容的当前对齐方式<br>textBaseline    设置或返回在绘制文本时使用的当前文本基线</p>
<h1 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h1><p>shadowColor:设置或返回用于阴影的颜色<br>shadowBlur:设置或返回用于阴影的模糊级别<br>shadowOffsetX:设置或返回阴影距形状的水平距离<br>shadowOffsetY:设置或返回阴影距形状的垂直距离</p>
<h1 id="剪辑区域"><a href="#剪辑区域" class="headerlink" title="剪辑区域"></a>剪辑区域</h1><p>clip();<br>从原始画布剪切任意形状和尺寸的区域</p>
<h1 id="路径方向"><a href="#路径方向" class="headerlink" title="路径方向"></a>路径方向</h1><p>非零环绕原则</p>
<h1 id="交互"><a href="#交互" class="headerlink" title="交互"></a>交互</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cxt.clearRect(x,y,width,height);//自清空，用于动画</div><div class="line">cxt.isPointInPath(x,y);//检测这个点是否在规划的路径中</div><div class="line">canvas.addEventListener(&quot;mouseup&quot;,detect);</div></pre></td></tr></table></figure>
<p>getBoundingClientRect()获取元素位置。用于获得页面中某个元素的左，上，右和下分别相对浏览器视窗的位置。getBoundingClientRect是DOM元素到浏览器可视范围的距离（不包含文档卷起的部分）。该函数返回一个Object对象，该对象有6个属性：top,lef,right,bottom,width,height；这里的top、left和css中的理解很相似，width、height是元素自身的宽高，但是right，bottom和css中的理解有点不一样。right是指元素右边界距窗口最左边的距离，bottom是指元素下边界距窗口最上面的距离。</p>
<h1 id="图形库"><a href="#图形库" class="headerlink" title="图形库"></a>图形库</h1><p>canvasplus<br><a href="https://code.google.com/p/canvasplus/" target="_blank" rel="external">https://code.google.com/p/canvasplus/</a></p>
<p>artisan js<br><a href="http://artisanjs.com/" target="_blank" rel="external">http://artisanjs.com/</a></p>
<p>Rgraph<br><a href="https://roopons.com.au/wp-content/plugins/viral-optins/js/rgraph/" target="_blank" rel="external">https://roopons.com.au/wp-content/plugins/viral-optins/js/rgraph/</a></p>

  </section>

  
  

<section class="post-comments">

    <div class="ds-thread" data-thread-key="2016/07/28/canvas-0/"></div>

    <script type="text/javascript">
      var duoshuoQuery = {short_name:"Kongwsh"};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
        || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
    </script> 

</section>


</article>


            <footer class="footer">

    <span class="footer__copyright">&copy; 2014-2015. | 由<a href="https://hexo.io/">Hexo</a>强力驱动 | 主题<a href="https://github.com/someus/huno">Huno</a></span>
    
</footer>
        </div>
    </div>

    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    

    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    
    
    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
